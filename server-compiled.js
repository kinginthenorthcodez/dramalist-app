(()=>{var e={142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},13:e=>{"use strict";e.exports=require("mongodb")}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var s=o[t]={exports:{}};return e[t](s,s.exports,r),s.exports}(()=>{const{MongoClient:e}=r(13),o=r(142),t=r(860),n=t();let s;o.config(),n.set("view engine","ejs"),n.set("views","./views"),n.use(t.static("public")),n.get("/",(async(e,o)=>{let r=await s.collection("cdramas").find({}).toArray();console.log("DATA: ",r),o.render("home",{dramas:r})})),n.get("/admin",((e,o)=>{o.render("admin")})),n.get("/api/dramas",(async(e,o)=>{let r=await s.collection("cdramas").find({}).toArray();console.log("DATA: ",r),o.json(r)})),async function(){try{const o=new e(process.env.URL);await o.connect(),s=o.db(),n.listen(3e3,(()=>{console.log("Server running on port 3000!")}))}catch(e){console.error(e)}finally{console.log("Ok let go!")}}()})()})();